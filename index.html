<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BITCOIN CHANGE - BTC/USDT Price (Live)</title>
    <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
    <style>
        /* --- Basic Reset & Full Screen Setup --- */
        html, body { height: 100%; width: 100%; margin: 0; padding: 0; overflow: hidden; box-sizing: border-box; }
        *, *:before, *:after { box-sizing: inherit; }
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; background-color: #000000; color: #e0e0e0; }
        .app-layout { display: flex; flex-direction: column; height: 100vh; width: 100vw; background-color: #000000; }

        /* --- Header Section --- */
        .ticker-header {
            background-color: #1a1a1a; padding: 10px 25px; width: 100%;
            display: flex; align-items: center; justify-content: space-between; /* Keep vertical center */
            flex-shrink: 0; border-bottom: 1px solid #333;
        }
        .ticker-header .left-group { display: flex; align-items: center; gap: 20px; } /* Align items center vertically */
        .ticker-header .right-group { text-align: right; }

        /* --- Logo Styling (Using IMG now) --- */
        #bitcoin-logo-svg {
            display: block;
            height: 40px; /* Control logo height */
            width: auto;  /* Maintain aspect ratio */
            vertical-align: middle; /* Ensure vertical alignment */
        }

        /* H1 Title next to the logo */
        h1 { color: #ffffff; margin: 0; font-size: 1.3em; font-weight: 500; }

        /* --- Price Display (No Flash) --- */
        #price {
            font-size: 3.2em; font-weight: 700; color: #00aaff; margin: 0 0 4px 0;
            line-height: 1; min-height: auto;
            /* No transitions or background changes needed */
         }
        #price.loading, #price.error { font-size: 1.2em; font-weight: 400; }
        #price.loading { color: #aaaaaa; }
        #price.error { color: #ff8a80; }

        /* --- 24h Stats Display --- */
        .price-stats { font-size: 0.9em; line-height: 1.3; margin-bottom: 4px; }
        .price-stats span { margin-left: 15px; color: #b0b0b0; }
        .price-stats span:first-child { margin-left: 0; }
        #change-24h { font-weight: 600; }
        .source { font-size: 0.75em; color: #888; margin: 0; line-height: 1.1; }

        /* --- Chart Container & Elements --- */
        #chart-container { flex-grow: 1; width: 100%; background-color: #000000; padding: 5px 10px 5px 5px; position: relative; overflow: hidden; }
        #chart-status { display: none; position: absolute; top: 15px; left: 15px; background-color: rgba(0,0,0,0.7); color: #ccc; padding: 6px 12px; font-size: 0.9em; border-radius: 4px; z-index: 10; }
        .apexcharts-canvas { margin: 0 auto; }
        .apexcharts-tooltip-series-group { padding-bottom: 4px !important; }
        .chart-timeframe { position: absolute; bottom: 10px; right: 15px; z-index: 5; background: rgba(0,0,0,0.5); padding: 2px 5px; border-radius: 3px; font-size: 0.75em; color: #888; }

        /* --- Scrolling Ticker Tape Styling --- */
        .ticker-tape { width: 100%; background-color: #1a1a1a; padding: 8px 0; overflow: hidden; white-space: nowrap; box-sizing: border-box; border-top: 1px solid #333; flex-shrink: 0; font-size: 1.1em; }
        .ticker-tape .content { display: inline-block; padding-left: 100%; animation: scroll-left 45s linear infinite; color: #f3b429; direction: rtl; }
        .ticker-tape .content span { margin: 0 50px; }
        @keyframes scroll-left { 0% { transform: translateX(0); } 100% { transform: translateX(-100%); } }
        .ticker-tape:hover .content { animation-play-state: paused; }

    </style>
</head>
<body>
    <div class="app-layout">
        <div class="ticker-header">
             <div class="left-group">
                  <!-- Reverted to IMG tag with Base64 SRC -->
                  <img id="bitcoin-logo-svg" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iNTU2cHgiIGhlaWdodD0iNzZweCIgdmlld0JveD0iMCAwIDU1NiA3NiIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj4KICAgIDx0aXRsZT5sb2dvLWJpdGNvaW4tZXBzPC90aXRsZT4KICAgIDxnIGlkPSJsb2dvLWJpdGNvaW4tZXBzIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8cGF0aCBkPSJNNTA3LjM2Niw2MS40NjkgTDUzOS4xMSw2MS40NjkgTDUzOS4xMSw1NC4wMjcgTDUxNS41NzksNTQuMDI3IEw1MTUuNTc5LDQxLjQ5MiBMNTM2Ljc1OSw0MS40OTIgTDUzNi43NTksMzQuMDUgTDUxNS41NzksMzQuMDUgTDUxNS41NzksMjIuNjkgTDUzNy45MzQsMjIuNjkgTDUzNy45MzQsMTUuMjQ5IEw1MDcuMzY2LDE1LjI0OSBMNTA3LjM2Niw2MS40NzEgTDUwNy4zNjYsNjEuNDY5IFogTTQ5Ny42NTMsMzQuNDQyIEw0NzkuOTg5LDM0LjQ0MiBMNDc5Ljk4OSw0MS44ODQgTDQ4OS40NDEsNDEuODg0IEw0ODkuNDQxLDUyLjc4NyBDNDg3LjkwOCw1My42NTMgNDg2LjI0Nyw1NC4yNyA0ODQuNTIxLDU0LjYxNSBDNDgyLjU4MSw1NS4wMTcgNDgwLjYwMyw1NS4yMTQgNDc4LjYyMiw1NS4yMDMgQzQ3Ni4zOTIsNTUuMjM2IDQ3NC4xODIsNTQuNzkxIDQ3Mi4xMzksNTMuODk4IEM0NzAuMjQ1LDUzLjA1OCA0NjguNTQ3LDUxLjgzNSA0NjcuMTQ5LDUwLjMwNyBDNDY1LjcyOCw0OC43MzEgNDY0LjYzNCw0Ni44ODkgNDYzLjkyNiw0NC44ODkgQzQ2My4xNDUsNDIuNjg5IDQ2Mi43NTgsNDAuMzY4IDQ2Mi43ODIsMzguMDM0IEM0NjIuNzY2LDM1LjgyOCA0NjMuMTUyLDMzLjYzNyA0NjMuOTI2LDMxLjU3IEM0NjQuNjUsMjkuNjI3IDQ2NS43NDUsMjcuODQyIDQ2Ny4xNDksMjYuMzE2IEM0NjguNTUsMjQuODA3IDQ3MC4yNDksMjMuNjA3IDQ3Mi4xMzksMjIuNzkxIEM0NzQuMTg3LDIxLjkxOCA0NzYuMzk1LDIxLjQ4NSA0NzguNjIyLDIxLjUxNyBDNDgwLjkwMSwyMS41MDYgNDgzLjE2NCwyMS45MDMgNDg1LjMwMywyMi42OTIgQzQ4Ny4zMDksMjMuNDEzIDQ4OS4xNDEsMjQuNTQ4IDQ5MC42ODEsMjYuMDIyIEw0OTYuNzQ0LDE5Ljg4NSBDNDk0LjM3NiwxNy43NDcgNDkxLjU0LDE2LjE5MyA0ODguNDYzLDE1LjM0OCBDNDg1LjIzMywxNC40ODEgNDgxLjkwMiwxNC4wNTIgNDc4LjU1OSwxNC4wNzUgQzQ3NS4yMSwxNC4wMzcgNDcxLjg4NCwxNC42MjQgNDY4Ljc1LDE1LjgwNSBDNDY1Ljg3MSwxNi44OTUgNDYzLjI1MiwxOC41NzQgNDYxLjA1OSwyMC43MzQgQzQ1OC44NiwyMi45MzggNDU3LjE0LDI1LjU3MSA0NTYuMDA2LDI4LjQ3IEM0NTQuNzU0LDMxLjY4MyA0NTQuMTM1LDM1LjEwOCA0NTQuMTgyLDM4LjU1NiBDNDU0LjEzNiw0MS45MyA0NTQuNzU2LDQ1LjI3OSA0NTYuMDA2LDQ4LjQxNCBDNDU4LjI5OSw1NC4xOTQgNDYyLjkyOCw1OC43MzQgNDY4Ljc1LDYwLjkxMyBDNDcxLjg4NCw2Mi4wOTUgNDc1LjIxLDYyLjY4MiA0NzguNTU5LDYyLjY0NCBDNDg1LjIwNSw2Mi43MzggNDkxLjc3LDYxLjE2NyA0OTcuNjU0LDU4LjA3MyBMNDk3LjY1NCwzNC40NDIgTDQ5Ny42NTMsMzQuNDQyIFogTTQwNC43NzgsNjEuNDY5IEw0MTIuOTksNjEuNDY5IEw0MTIuOTksMjYuMDIgTDQxMy4xMTgsMjYuMDIgTDQzNS45MzIsNjEuNDY5IEw0NDYuMzYyLDYxLjQ2OSBMNDQ2LjM2MiwxNS4yNDcgTDQzOC4xNDksMTUuMjQ3IEw0MzguMTQ5LDQ5LjU4NSBMNDM4LjAxNyw0OS41ODUgTDQxNS42NjEsMTUuMjQ3IEw0MDQuNzc4LDE1LjI0NyBMNDA0Ljc3OCw2MS40NjkgWiBNMzY4LjczMSw0My44NDIgTDM3NS45NzEsMjUuMDQxIEwzODMuMDcxLDQzLjg0MiBMMzY4LjczMSw0My44NDIgWiBNMzUyLjU3Miw2MS40NjkgTDM2MS43NTgsNjEuNDY5IEwzNjUuOTM0LDUwLjg5MyBMMzg1LjkzOCw1MC44OTMgTDM5MC4yNDEsNjEuNDY5IEwzOTkuNjI5LDYxLjQ2OSBMMzc5Ljc0NywxNS4yNDcgTDM3Mi42NDUsMTUuMjQ3IEwzNTIuNTcyLDYxLjQ2OSBaIE0zMDkuNDI0LDYxLjQ2OSBMMzE3LjYzNyw2MS40NjkgTDMxNy42MzcsNDEuMTAxIEwzMzkuMjEsNDEuMTAxIEwzMzkuMjEsNjEuNDY5IEwzNDcuNDE4LDYxLjQ2OSBMMzQ3LjQxOCwxNS4yNDcgTDMzOS4yMSwxNS4yNDcgTDMzOS4yMSwzMy42NTYgTDMxNy42MzcsMzMuNjU2IEwzMTcuNjM3LDE1LjI0OSBMMzA5LjQyNCwxNS4yNDkgTDMwOS40MjQsNjEuNDcxIEwzMDkuNDI0LDYxLjQ2OSBaIE0zMDIuODM5LDIxLjM4NSBDMzAwLjgyNCwxOC45NDggMjk4LjI2OSwxNy4wMTQgMjk1LjM3NiwxNS43MzggQzI5Mi42MTQsMTQuNjExIDI4OS42NTYsMTQuMDQ2IDI4Ni42NzUsMTQuMDc0IEMyODMuMzI2LDE0LjAzNSAyODAsMTQuNjIyIDI3Ni44NjYsMTUuODAzIEMyNzMuOTg3LDE2Ljg5MyAyNzEuMzY4LDE4LjU3MiAyNjkuMTc1LDIwLjczMyBDMjY2Ljk3NiwyMi45MzYgMjY1LjI1NiwyNS41NjkgMjY0LjEyMSwyOC40NjggQzI2Mi44NywzMS42ODIgMjYyLjI1LDM1LjEwNyAyNjIuMjk3LDM4LjU1NCBDMjYyLjI1MSw0MS45MjkgMjYyLjg3MSw0NS4yNzggMjY0LjEyMSw0OC40MTIgQzI2Ni40MTQsNTQuMTkyIDI3MS4wNDMsNTguNzMyIDI3Ni44NjYsNjAuOTEyIEMyNzkuOTk5LDYyLjA5NCAyODMuMzI2LDYyLjY4MSAyODYuNjc1LDYyLjY0MyBDMjg5Ljk2OSw2Mi42NjEgMjkzLjIzMSw2MS45OTQgMjk2LjI1NCw2MC42ODQgQzI5OS4zMTgsNTkuMzI1IDMwMS45NTUsNTcuMTU5IDMwMy44ODIsNTQuNDE2IEwyOTcuMTA1LDQ5LjU4NiBDMjk1LjgsNTEuMzU5IDI5NC4xMTgsNTIuODE5IDI5Mi4xOCw1My44NjEgQzI5MC40OTgsNTQuNzM2IDI4OC42MzMsNTUuMTk0IDI4Ni43MzgsNTUuMiBDMjg0LjUwOSw1NS4yMzMgMjgyLjI5OCw1NC43ODcgMjgwLjI1NCw1My44OTQgQzI3OC4zNjIsNTMuMDU2IDI3Ni42NjUsNTEuODMzIDI3NS4yNyw1MC4zMDQgQzI3My44NDcsNDguNzI5IDI3Mi43NDksNDYuODg3IDI3Mi4wNDIsNDQuODg1IEMyNzEuMjYzLDQyLjY4NSAyNzAuODc4LDQwLjM2NCAyNzAuOTAzLDM4LjAzIEMyNzAuODg1LDM1LjgyNSAyNzEuMjcsMzMuNjM0IDI3Mi4wNDIsMzEuNTY4IEMyNzIuNzY3LDI5LjYyMyAyNzMuODYzLDI3LjgzOCAyNzUuMjcsMjYuMzEyIEMyNzYuNjY4LDI0LjgwMyAyNzguMzY2LDIzLjYwMyAyODAuMjU0LDIyLjc4NyBDMjgyLjMwMywyMS45MTUgMjg0LjUxMiwyMS40ODIgMjg2LjczOCwyMS41MTQgQzI4OC4zNzksMjEuNTIgMjkwLjAwMywyMS44MyAyOTEuNTMsMjIuNDI4IEMyOTMuMTE1LDIzLjAzOCAyOTQuNzU2LDI0LjI1NyAyOTYuNDUxLDI2LjA4NCBMMzAyLjgzOSwyMS4zODUgWiBNMjQ4Ljg3NywwLjAyMSBMNTU1LjM5NywwLjAyMSBDNTU1LjUxNSwwLjAyMSA1NTUuNjA5LDAuMTE2IDU1NS42MDksMC4yMzQgTDU1NS42MDksNzUuNzg3IEM1NTUuNjA5LDc1LjkwNCA1NTUuNTE1LDc2IDU1NS4zOTcsNzYgTDI0OC44NzcsNzYgQzI0OC43Niw3NiAyNDguNjY0LDc1LjkwNCAyNDguNjY0LDc1Ljc4NyBMMjQ4LjY2NCwwLjIzNCBDMjQ4LjY2NCwwLjExNiAyNDguNzYsMC4wMjEgMjQ4Ljg3NywwLjAyMSBMMjQ4Ljg3NywwLjAyMSBaIiBpZD0iRmlsbC0xIiBmaWxsPSIjRjNCNDI5Ij48L3BhdGg+CiAgICAgICAgPHBhdGggZD0iTTE5Ny41OCwyOS45MzEgQzE5Ny41OCwyOC4zMzYgMTk4LjQ1MywyNy41MzggMTk5Ljk3NCwyNy41MzggTDIwMi4wMDYsMjcuNTM4IEMyMDMuNjAyLDI3LjUzOCAyMDQuNCwyOC4zMzYgMjA0LjQsMjkuOTMxIEwyMDQuNCwzMy4xOTUgQzIwNC4zOTIsMzMuOTAyIDIwNC4zMTksMzQuNjA2IDIwNC4xODIsMzUuMjk5IEwyMDQuMzI1LDM1LjI5OSBDMjA2Ljg5MiwyOS45NTUgMjEyLjMyOCwyNi41ODcgMjE4LjI1NiwyNi42NjcgQzIyNi44ODksMjYuNjY3IDIzMC44MDMsMzEuMzgyIDIzMC44MDMsNDAuNzM5IEwyMzAuODAzLDYxLjg0OSBDMjMwLjgwMyw2My40NDQgMjMwLjAwNSw2NC4yNDIgMjI4LjQxLDY0LjI0MiBMMjI2LjE2NSw2NC4yNDIgQzIyNC42MzksNjQuMjQyIDIyMy43NjYsNjMuNDQ0IDIyMy43NjYsNjEuODQ5IEwyMjMuNzY2LDQyLjMzNSBDMjIzLjc2NiwzNy4xODUgMjIyLjc1LDMzLjEyMyAyMTYuODc4LDMzLjEyMyBDMjA5Ljc2NywzMy4xMjMgMjA0LjYxOCwzOS4wNzEgMjA0LjYxOCw0Ni42ODcgTDIwNC42MTgsNjEuODQ2IEMyMDQuNjE4LDYzLjQ0MiAyMDMuODIsNjQuMjM5IDIwMi4yMjQsNjQuMjM5IEwxOTkuOTc0LDY0LjIzOSBDMTk4LjQ1Myw2NC4yMzkgMTk3LjU4LDYzLjQ0MiAxOTcuNTgsNjEuODQ2IEwxOTcuNTgsMjkuOTMxIFogTTE4MC4zOSwyOS45MzEgQzE4MC4zOSwyOC4zMzYgMTgxLjI1NywyNy41MzggMTgyLjc4MywyNy41MzggTDE4NS4wMjgsMjcuNTM4IEMxODYuNjI5LDI3LjUzOCAxODcuNDI5LDI4LjMzNiAxODcuNDI3MDA0LDI5LjkzMSBMMTg3LjQyNzAwNCw2MS44NDkgQzE4Ny40MjcwMDQsNjMuNDQ0IDE4Ni42MjcsNjQuMjQyIDE4NS4wMjgsNjQuMjQyIEwxODIuNzgzLDY0LjI0MiBDMTgxLjI1Nyw2NC4yNDIgMTgwLjM5LDYzLjQ0NCAxODAuMzksNjEuODQ5IEwxODAuMzksMjkuOTMxIFogTTE4MC4zMTUsMTcuODE3IEwxODAuMzE1LDE1LjQyMyBDMTgwLjMxNSwxMy44MjcgMTgxLjExMywxMy4wMjkgMTgyLjcwOCwxMy4wMjkgTDE4NS4xNzcsMTMuMDI5IEMxODYuNjk4LDEzLjAyOSAxODcuNTcsMTMuODI3IDE4Ny41NywxNS40MjMgTDE4Ny41NywxNy44MTcgQzE4Ny41NywxOS4zNCAxODYuNjk4LDIwLjIxMDAwMDkgMTg1LjE3NywyMC4yMTAwMDA5IEwxODIuNzA4LDIwLjIxMDAwMDkgQzE4MS4xMTMsMjAuMjExIDE4MC4zMTUsMTkuMzM5IDE4MC4zMTUsMTcuODE3IFogTTE1Mi44MjEsNTkuMDIgQzE1OS43ODksNTkuMDIgMTY1LjQ0Myw1My41MDYgMTY1LjQ0Myw0NS44MTggQzE2NS40NDMsMzguMjAxIDE1OS43ODksMzIuNzYgMTUyLjgyMSwzMi43NiBDMTQ1LjkzMywzMi43NiAxNDAuMTk5LDM4LjIwMSAxNDAuMTk5LDQ1LjgxOCBDMTQwLjE5OSw1My41MDYgMTQ1LjkzMyw1OS4wMTkgMTUyLjgyMSw1OS4wMTkgTDE1Mi44MjEsNTkuMDIgWiBNMTUyLjgyMSwyNi42NjcgQzE2My43NzgsMjYuNjY3IDE3Mi42MjksMzQuNzE5IDE3Mi42MjksNDUuODE2IEMxNzIuNjI5LDU2Ljk4NiAxNjMuNzc4LDY1LjExMSAxNTIuODIxLDY1LjExMSBDMTQxLjg2NCw2NS4xMTEgMTMzLjA5Myw1Ni45ODcgMTMzLjA5Myw0NS44MTYgQzEzMy4wOTMsMzQuNzE5IDE0MS44NjksMjYuNjY3IDE1Mi44MjEsMjYuNjY3IFogTTExNC41OTMsMjYuNjY3IEMxMjAuNzU4LDI2LjY2NyAxMjQuNzQ3LDI5LjA2MSAxMjYuNzEsMzAuNTg0IEMxMjcuOTM5LDMxLjM4MiAxMjguMDEzLDMyLjYxNSAxMjcuMTQxLDMzLjg0OCBMMTI2LjQxNywzNC45MzcgQzEyNS41NDUsMzYuMjQyIDEyNC41MjksMzYuMzE1IDEyMy4xNTEsMzUuNTE3IEMxMjAuNzc3LDMzLjc1OSAxMTcuOTA5LDMyLjc5NCAxMTQuOTU1LDMyLjc2IEMxMDcuNTU2LDMyLjc2IDEwMi4xODksMzguMjczIDEwMi4xODksNDUuODE4IEMxMDIuMTg5LDUzLjI4OSAxMDcuNTU2LDU5LjAyIDExNS4wOTksNTkuMDIgQzExOC41MDEsNTguOTY2IDEyMS43OTEsNTcuNzkzIDEyNC40Niw1NS42ODMgQzEyNS43NjMsNTQuODEzIDEyNi44NTMsNTQuOTU3IDEyNy43MjYsNTYuMzM1IEwxMjguMzA2LDU3LjQyNCBDMTI5LjAyOSw1OC42NTYgMTI4LjgxMSw1OS44MTggMTI3LjY1MSw2MC42MTUgQzEyMy45NSw2My41OCAxMTkuMzM1LDY1LjE3IDExNC41OTMsNjUuMTEzIEMxMDMuMDU2LDY1LjExMyA5NS4wMDksNTYuOTE2IDk1LjAwOSw0NS44OSBDOTUuMDA4LDM1LjAwOSAxMDMuMTMxLDI2LjY2NyAxMTQuNTkzLDI2LjY2NyBaIE03NC42OTUsMzMuNjMgTDcyLjE1MywzMy42MyBDNzAuNjMxLDMzLjYzIDY5LjgzMywzMi43NiA2OS44MzMsMzEuMjM2IEw2OS44MzMsMzAuMjk2IEM2OS44MzMsMjguNzczIDcwLjYzMSwyNy45MDMgNzIuMjI3LDI3LjkwMyBMNzQuODM5LDI3LjkwMyBMNzQuODM5LDE5Ljg0OCBDNzQuODM5LDE4LjI1MyA3NS43MTEsMTcuNDU0IDc3LjIzMiwxNy40NTQgTDc5LjMzOSwxNy40NTQgQzgwLjkzNCwxNy40NTQgODEuNzMyLDE4LjI1MyA4MS43MzIsMTkuODQ4IEw4MS43MzIsMjcuOTAzIEw4OC4xMTUsMjcuOTAzIEM4OS43MTEsMjcuOTAzIDkwLjUwOSwyOC43NzMgOTAuNTA5LDMwLjI5NiBMOTAuNTA5LDMxLjI0IEM5MC41MDksMzIuNzYzIDg5LjcxMSwzMy42MzMgODguMTg5LDMzLjYzMyBMODEuNzMyLDMzLjYzMyBMODEuNzMyLDQ5Ljk1NSBDODEuNzMyLDU2LjkxOSA4Ni4wMDksNTguMDA3IDg4LjY5NSw1OC4yMjUgQzkwLjU4Myw1OC4zNyA5MS4yMzIsNTguOTQ5IDkxLjIzMiw2MC42MTggTDkxLjIzMiw2Mi4xNDIgQzkxLjIzMiw2My44MTEgOTAuMjksNjQuNTM1IDg4LjMzMyw2NC41MzUgQzgxLjA3OCw2NC41MzUgNzQuNjk1LDYwLjMyOCA3NC42OTUsNTEuMDQzIEw3NC42OTUsMzMuNjMgWiBNNTUuNzU5LDI5LjkzMSBDNTUuNzU5LDI4LjMzNiA1Ni42MzIsMjcuNTM4IDU4LjE1MywyNy41MzggTDYwLjQwMywyNy41MzggQzYxLjk5OCwyNy41MzggNjIuNzk2LDI4LjMzNiA2Mi43OTYsMjkuOTMxIEw2Mi43OTYsNjEuODQ5IEM2Mi43OTYsNjMuNDQ0IDYxLjk5OCw2NC4yNDIgNjAuNDAzLDY0LjI0MiBMNTguMTUzLDY0LjI0MiBDNTYuNjMyLDY0LjI0MiA1NS43NTksNjMuNDQ0IDU1Ljc1OSw2MS44NDkgTDU1Ljc1OSwyOS45MzEgWiBNNTUuNjksMTcuODE3IEw1NS42OSwxNS40MjMgQzU1LjY5LDEzLjgyNyA1Ni40ODMsMTMuMDI5IDU4LjA4NCwxMy4wMjkgTDYwLjU0NiwxMy4wMjkgQzYyLjA3MywxMy4wMjkgNjIuOTQsMTMuODI3IDYyLjk0LDE1LjQyMyBMNjIuOTQsMTcuODE3IEM2Mi45NCwxOS4zNCA2Mi4wNzMsMjAuMjEwMDAwOSA2MC41NDYsMjAuMjEwMDAwOSBMNTguMDg0LDIwLjIxMDAwMDkgQzU2LjQ4MywyMC4yMTEgNTUuNjksMTkuMzM5IDU1LjY5LDE3LjgxNyBaIE0zMi43MzMsNTcuOTYzIEMzMS4yNTIsNTguNDk2IDI5LjY4NSw1OC43NDUgMjguMTExLDU4LjY5NiBMMTIuNzM0LDU4LjY4OSBMMTIuNzM0LDQwLjcyNiBMMjguNjk2LDQwLjcyMSBDMzQuMTI3LDQwLjcyMSAzNy42NDgsNDQuMjQyIDM3LjY0OCw0OS41OTkgQzM3LjY0OCw1My40ODcgMzUuNzM5LDU2LjcxNiAzMi43MzMsNTcuOTYzIFogTTI2Ljg2MSwxOC45MjkgQzI5LjA2MywxOC45MjkgMzAuNzQ5LDE5LjIyMyAzMi4yMTcsMTkuOTU3IEMzNC40MTksMjEuMjA0IDM1LjU5NSwyMy43NzIgMzUuNTk1LDI2Ljc4IEMzNS41OTUsMzEuNDc2IDMyLjY1OSwzNC43MDYgMjcuOTYyLDM0LjcwNiBMMTIuNzM0LDM0LjcwNiBMMTIuNzM0LDE4LjkyOSBMMjYuODYxLDE4LjkyOSBaIE0zNi41NDcsMzcuNDE5IEwzNi41NDcsMzcuMjcyIEM0MC41ODQsMzUuMjE4IDQzLjA3OSwzMS4xODIgNDMuMDc5LDI2LjEyIEM0My4wNzksMjAuNTQ0IDQwLjA2OCwxNi4yODggMzUuOTYyLDE0LjQ1NCBDMzMuMzkzLDEzLjI4IDMwLjYwNiwxMi45MTEgMjYuODYxLDEyLjkxMSBMMjQuOTMsMTIuOTExIEwyNC45Myw4LjY3NSBDMjQuOTMsNy44NDQgMjQuMjU2LDcuMTcgMjMuNDI1LDcuMTcgTDE5LjA5NSw3LjE3IEMxOC4yNjQsNy4xNyAxNy41OTEsNy44NDQgMTcuNTksOC42NzUgTDE3LjU5LDEyLjkxMSBMMTIuNzM0LDEyLjkxMSBMMTIuNzM0LDguNjc1IEMxMi43MzMsNy44NDQgMTIuMDYsNy4xNyAxMS4yMjgsNy4xNyBMNi44OTksNy4xNyBDNi4wNjgsNy4xNyA1LjM5NCw3Ljg0NCA1LjM5Myw4LjY3NSBMNS4zOTMsMTIuOTExIEwwLjk2MywxMi45MTEgQzAuNDQxLDEyLjkxMSAwLjAxNywxMy4zMzQgMC4wMTYsMTMuODU2IEwwLjAxNiwxNy45ODMgQzAuMDE3LDE4LjUwNiAwLjQ0MSwxOC45MjggMC45NjMsMTguOTI4IEw1LjM5MywxOC45MjggTDUuMzkzLDU4LjY4MyBMMS4yMTMsNTguNjgzIEMwLjU0Myw1OC42ODMgMCw1OS4yMjYgMCw1OS44OTYgTDAuMDExLDYzLjUwOCBDMC4wMTQsNjQuMTc1IDAuNTU2LDY0LjcxNCAxLjIyNCw2NC43MTQgTDUuMzkzLDY0LjcxNCBMNS4zOTMsNjguODg5IEM1LjM5NCw2OS43MiA2LjA2OCw3MC4zOTMgNi44OTksNzAuMzk0IEwxMS4yMjgsNzAuMzk0IEMxMi4wNiw3MC4zOTMgMTIuNzMzLDY5LjcyIDEyLjczNCw2OC44ODkgTDEyLjczNCw2NC43MTQgTDE3LjU5LDY0LjcxNCBMMTcuNTksNjguODg5IEMxNy41OTEsNjkuNzIgMTguMjY0LDcwLjM5MyAxOS4wOTUsNzAuMzk0IEwyMy40MjUsNzAuMzk0IEMyNC4yNTYsNzAuMzkzIDI0LjkzLDY5LjcyIDI0LjkzLDY4Ljg4OSBMMjQuOTMsNjQuNzE0IEwyNy44MTMsNjQuNzE0IEMzMC42NzUsNjQuNzE0IDMzLjEsNjQuNTY3IDM1LjU5NSw2My43NiBDNDAuOTUxLDYxLjkyNSA0NS4xMzIsNTYuNzg5IDQ1LjEzMiw0OS45NjYgQzQ1LjEzMiw0NC4wOTYgNDIuMTIxLDM5LjAzMyAzNi41NDcsMzcuNDE5IEwzNi41NDcsMzcuNDE5IFoiIGlkPSJGaWxsLTMiIGZpbGw9IiNGM0I0MjkiPjwvcGF0aD4KICAgIDwvZz4KPC9zdmc+" alt="Bitcoin Change Logo">
                  <h1>BTC/USDT Price</h1> <!-- Title next to logo -->
              </div>
             <div class="right-group">
                  <div id="price" class="loading">Loading...</div>
                  <div class="price-stats"> <span id="change-24h">---%</span> <span id="high-24h">H: ---</span> <span id="low-24h">L: ---</span> </div>
                  <p class="source">Data from Kraken API</p>
             </div>
        </div>

        <!-- Chart container -->
        <div id="chart-container">
            <div id="chart-status">Initializing chart...</div>
            <div id="chart-timeframe" class="chart-timeframe">--- Chart</div>
        </div>

        <!-- Ticker Tape Container -->
        <div class="ticker-tape">
            <div class="content" dir="rtl">
                 <!-- Hebrew Text -->
                 <span>קמפיין "חבר מביא חבר" של ביטקוין צ'יינג' מעניק 20 ש"ח לחבר חדש שמבצע פעולה ו-20% הנחה למי שהביא אותו. פרטים נוספים בדלפק ***</span>
                 <span>קמפיין "חבר מביא חבר" של ביטקוין צ'יינג' מעניק 20 ש"ח לחבר חדש שמבצע פעולה ו-20% הנחה למי שהביא אותו. פרטים נוספים בדלפק ***</span>
                 <span>קמפיין "חבר מביא חבר" של ביטקוין צ'יינג' מעניק 20 ש"ח לחבר חדש שמבצע פעולה ו-20% הנחה למי שהביא אותו. פרטים נוספים בדלפק ***</span>
            </div>
        </div>
    </div>

    <script>
        // --- All JavaScript remains IDENTICAL to the previous version ---
        // (Constants, Variables, formatNumber, fetchAndUpdatePrice (NO FLASH), Indicator Calcs,
        //  fetchAndUpdateOHLC, initChart, DOMContentLoaded listener etc.)
        const priceElement = document.getElementById('price');
        const chartContainer = document.getElementById('chart-container');
        const chartStatusElement = document.getElementById('chart-status');
        const change24hElement = document.getElementById('change-24h');
        const high24hElement = document.getElementById('high-24h');
        const low24hElement = document.getElementById('low-24h');
        const timeframeElement = document.getElementById('chart-timeframe');
        const KRAKEN_TICKER_URL = 'https://api.kraken.com/0/public/Ticker?pair=XBTUSDT';
        const KRAKEN_OHLC_URL = 'https://api.kraken.com/0/public/OHLC?pair=XBTUSDT';
        const TICKER_UPDATE_INTERVAL = 5000;
        const CHART_INTERVAL = 1;
        const CHART_UPDATE_INTERVAL = 60000;
        const SMA1_PERIOD = 10; const SMA2_PERIOD = 20; const BB_PERIOD = 20; const BB_STDDEV = 2;
        let apexChart = null; let fullChartDataOHLC = []; let areaChartData = [];
        let sma1Data = []; let sma2Data = []; let bbUpperData = []; let bbMiddleData = []; let bbLowerData = [];
        let lastOHLCTimestamp = null; let tickerIntervalId = null; let chartIntervalId = null;

        function formatNumber(num, minDecimals = 2, maxDecimals = 2) { if (typeof num !== 'number' || isNaN(num)) { return '---'; } return num.toLocaleString(undefined, { minimumFractionDigits: minDecimals, maximumFractionDigits: maxDecimals }); }
        async function fetchAndUpdatePrice() { try { const response = await fetch(KRAKEN_TICKER_URL); if (!response.ok) throw new Error(`Ticker HTTP error! Status: ${response.status}`); const data = await response.json(); if (data.error && data.error.length > 0) throw new Error(`Kraken API error (Ticker): ${data.error.join(', ')}`); const resultKeys = Object.keys(data.result || {}); if (resultKeys.length === 0) throw new Error('No pair data found.'); const pairKey = resultKeys[0]; const pairData = data.result[pairKey]; const currentPrice = pairData?.c?.[0] ? parseFloat(pairData.c[0]) : null; const openPrice24h = pairData?.o ? parseFloat(pairData.o) : null; const high24h = pairData?.h?.[1] ? parseFloat(pairData.h[1]) : null; const low24h = pairData?.l?.[1] ? parseFloat(pairData.l[1]) : null; if (priceElement && currentPrice !== null) { priceElement.textContent = `$${formatNumber(currentPrice)}`; priceElement.classList.remove('loading', 'error'); /* No flash */ } else if (priceElement) { priceElement.textContent = 'Error'; priceElement.classList.add('error'); priceElement.classList.remove('loading'); } let changePercent = null; if (currentPrice !== null && openPrice24h !== null && openPrice24h !== 0) { changePercent = ((currentPrice - openPrice24h) / openPrice24h) * 100; } if (change24hElement) { change24hElement.textContent = `${formatNumber(changePercent, 2, 2)}%`; if (changePercent === null) { change24hElement.style.color = '#b0b0b0'; } else { change24hElement.style.color = changePercent >= 0 ? '#26a69a' : '#ef5350'; } } if (high24hElement) high24hElement.textContent = `H: ${formatNumber(high24h)}`; if (low24hElement) low24hElement.textContent = `L: ${formatNumber(low24h)}`; } catch (error) { console.error('Error fetching ticker data:', error); if (priceElement) { priceElement.textContent = 'Error'; priceElement.classList.add('error'); priceElement.classList.remove('loading'); } if (change24hElement) change24hElement.textContent = '---%'; if (high24hElement) high24hElement.textContent = 'H: ---'; if (low24hElement) low24hElement.textContent = 'L: ---'; } }
        function calculateSMA(ohlcData, period) { const smaValues = []; const closingPrices = ohlcData.map(d => d.y[3]); for (let i = period - 1; i < closingPrices.length; i++) { const slice = closingPrices.slice(i - period + 1, i + 1); const sum = slice.reduce((a, b) => a + b, 0); const avg = sum / period; smaValues.push({ x: ohlcData[i].x, y: parseFloat(avg.toFixed(2)) }); } const padding = Array(period - 1).fill({ x: null, y: null }); for (let i=0; i < period - 1 && i < ohlcData.length; i++) { padding[i] = { x: ohlcData[i].x, y: null }; } return padding.concat(smaValues); }
        function calculateSD(ohlcData, period) { const sdValues = []; const closingPrices = ohlcData.map(d => d.y[3]); for (let i = period - 1; i < closingPrices.length; i++) { const slice = closingPrices.slice(i - period + 1, i + 1); const sum = slice.reduce((a, b) => a + b, 0); const mean = sum / period; const variance = slice.reduce((a, b) => a + Math.pow(b - mean, 2), 0) / period; sdValues.push(Math.sqrt(variance)); } return sdValues; }
        function calculateBollingerBands(ohlcData, period, stdDevMultiplier) { const bb = { upper: [], middle: [], lower: [] }; if (ohlcData.length < period) { const padding = ohlcData.map(d => ({ x: d.x, y: null })); return { upper: [...padding], middle: [...padding], lower: [...padding] }; } const middleBandData = calculateSMA(ohlcData, period); bb.middle = middleBandData; const standardDeviations = calculateSD(ohlcData, period); bb.upper = ohlcData.slice(0, period - 1).map(d => ({ x: d.x, y: null })); bb.lower = ohlcData.slice(0, period - 1).map(d => ({ x: d.x, y: null })); let sdIndex = 0; for (let i = period - 1; i < ohlcData.length; i++) { const middleValue = bb.middle[i].y; const sd = standardDeviations[sdIndex++]; if (middleValue !== null && sd !== undefined) { bb.upper.push({ x: ohlcData[i].x, y: parseFloat((middleValue + sd * stdDevMultiplier).toFixed(2)) }); bb.lower.push({ x: ohlcData[i].x, y: parseFloat((middleValue - sd * stdDevMultiplier).toFixed(2)) }); } else { bb.upper.push({ x: ohlcData[i].x, y: null }); bb.lower.push({ x: ohlcData[i].x, y: null }); } } return bb; }
        function formatOHLCDataForInternal(krakenData) { if (!Array.isArray(krakenData)) return []; return krakenData.map(candle => ({ x: candle[0] * 1000, y: [ parseFloat(candle[1]), parseFloat(candle[2]), parseFloat(candle[3]), parseFloat(candle[4]) ] })).sort((a, b) => a.x - b.x); }
        function deriveAreaChartData(ohlcData) { return ohlcData.map(d => ({ x: d.x, y: d.y[3] })); }
        async function fetchAndUpdateOHLC() { console.log(`Workspaceing OHLC data ${lastOHLCTimestamp ? 'since ' + lastOHLCTimestamp : '(initial load)'}`); if (chartStatusElement) { chartStatusElement.style.display = 'block'; chartStatusElement.textContent = "Fetching chart data..."; } let url = `${KRAKEN_OHLC_URL}&interval=${CHART_INTERVAL}${lastOHLCTimestamp ? '&since=' + lastOHLCTimestamp : ''}`; try { const response = await fetch(url); if (!response.ok) throw new Error(`OHLC HTTP error! Status: ${response.status}`); const data = await response.json(); if (data.error && data.error.length > 0) throw new Error(`Kraken OHLC API error: ${data.error.join(', ')}`); const resultKeys = Object.keys(data.result || {}); const pairKey = resultKeys.find(key => key !== 'last'); const krakenResponseBoundaryTimestamp = data.result?.last; let newDataFetched = false; if (pairKey && data.result[pairKey] && data.result[pairKey].length > 0) { const fetchedOhlcData = formatOHLCDataForInternal(data.result[pairKey]); if (fetchedOhlcData.length > 0) { const existingTimestamps = new Map(fullChartDataOHLC.map(d => [d.x, d])); let addedOrUpdatedCount = 0; fetchedOhlcData.forEach(newCandle => { const existingCandle = existingTimestamps.get(newCandle.x); if (!existingCandle) { fullChartDataOHLC.push(newCandle); existingTimestamps.set(newCandle.x, newCandle); addedOrUpdatedCount++; } else if (JSON.stringify(existingCandle.y) !== JSON.stringify(newCandle.y)) { Object.assign(existingCandle.y, newCandle.y); addedOrUpdatedCount++; } }); if (addedOrUpdatedCount > 0) { fullChartDataOHLC.sort((a, b) => a.x - b.x); newDataFetched = true; console.log(`${addedOrUpdatedCount} OHLC points added/updated.`); } } } else { console.log("No new OHLC data received."); } let newLastTimestamp = lastOHLCTimestamp; if (krakenResponseBoundaryTimestamp && krakenResponseBoundaryTimestamp !== lastOHLCTimestamp) { newLastTimestamp = krakenResponseBoundaryTimestamp; } else if (fullChartDataOHLC.length > 0) { const latestCandleStartTimeSeconds = fullChartDataOHLC[fullChartDataOHLC.length - 1].x / 1000; if (latestCandleStartTimeSeconds > (lastOHLCTimestamp || 0)) { newLastTimestamp = latestCandleStartTimeSeconds; } } if (newLastTimestamp !== lastOHLCTimestamp) { console.log(`Updating lastOHLCTimestamp to ${newLastTimestamp}`); lastOHLCTimestamp = newLastTimestamp; } if (newDataFetched || !apexChart) { console.log("Recalculating display data and indicators..."); areaChartData = deriveAreaChartData(fullChartDataOHLC); sma1Data = calculateSMA(fullChartDataOHLC, SMA1_PERIOD); sma2Data = calculateSMA(fullChartDataOHLC, SMA2_PERIOD); const bbResult = calculateBollingerBands(fullChartDataOHLC, BB_PERIOD, BB_STDDEV); bbUpperData = bbResult.upper; bbMiddleData = bbResult.middle; bbLowerData = bbResult.lower; if (apexChart) { console.log(`Updating chart series. Area points: ${areaChartData.length}`); apexChart.updateSeries([ { name: 'Price', data: areaChartData }, { name: 'SMA 10', data: sma1Data }, { name: 'SMA 20', data: sma2Data }, { name: 'BB Upper', data: bbUpperData }, { name: 'BB Middle', data: bbMiddleData }, { name: 'BB Lower', data: bbLowerData } ], false); if (chartStatusElement) chartStatusElement.textContent = `Chart updated: ${lastOHLCTimestamp ? new Date(lastOHLCTimestamp * 1000).toLocaleTimeString() : 'N/A'}`; } } else { console.log("No new data fetched, skipping recalculation."); if (chartStatusElement) chartStatusElement.textContent = `Chart up to date ${lastOHLCTimestamp ? '(' + new Date(lastOHLCTimestamp * 1000).toLocaleTimeString() + ')' : ''}`; } if(chartStatusElement) setTimeout(() => { chartStatusElement.style.display = 'none'; }, 3000); } catch (error) { console.error("Error fetching or updating OHLC data:", error); if (chartStatusElement) { chartStatusElement.textContent = "Error loading chart data."; chartStatusElement.style.display = 'block'; } } }
        function initChart() { console.log("Initializing ENHANCED Apex chart..."); if (!chartContainer || !timeframeElement) { return; } if (chartStatusElement) { } timeframeElement.textContent = `${CHART_INTERVAL}-Minute Chart`; const chartOptions = { chart: { type: 'line', height: '100%', background: '#000000', foreColor: '#e0e0e0', toolbar: { show: false }, animations: { enabled: true, easing: 'linear', dynamicAnimation: { speed: 300 } }, id: 'btcChart' }, series: [ { name: 'Price', type: 'area', data: areaChartData, color: '#f3b429' }, { name: 'SMA 10', type: 'line', data: sma1Data, color: '#FFFF00', stroke: { width: 1.5 } }, { name: 'SMA 20', type: 'line', data: sma2Data, color: '#FF0000', stroke: { width: 1.5 } }, { name: 'BB Upper', type: 'line', data: bbUpperData, color: '#6c757d', stroke: { width: 1, dashArray: 4 } }, { name: 'BB Middle', type: 'line', data: bbMiddleData, color: '#6c757d', stroke: { width: 1, dashArray: 4 }, visible: false }, { name: 'BB Lower', type: 'line', data: bbLowerData, color: '#6c757d', stroke: { width: 1, dashArray: 4 } } ], theme: { mode: 'dark' }, colors: ['#f3b429'], fill: { type: 'gradient', gradient: { shadeIntensity: 1, opacityFrom: 0.3, opacityTo: 0.05, stops: [0, 90, 100] } }, stroke: { width: 3, curve: 'smooth' }, xaxis: { type: 'datetime', labels: { datetimeUTC: true, style: { colors: '#999', fontSize: '11px'} }, axisBorder: { show: false }, axisTicks: { show: false }, tooltip: { enabled: false } }, yaxis: { tooltip: { enabled: true, formatter: (val) => val ? `$${formatNumber(val)}` : '' }, labels: { formatter: (val) => val ? `$${formatNumber(val)}` : '', style: { colors: '#999', fontSize: '11px' } }, opposite: true, axisBorder: { show: false }, tickAmount: 6, }, grid: { borderColor: '#444', padding: { left: 0, right: 10 } }, tooltip: { enabled: true, shared: true, intersect: false, theme: 'dark', x: { format: 'dd MMM HH:mm' }, y: { formatter: (value, { seriesIndex, w }) => { return formatNumber(value) || '---'; }, title: { formatter: (seriesName) => `${seriesName}:` } } }, markers: { size: 0, hover: { size: 0 } } }; try { function attemptRender() { if (chartContainer.clientHeight > 0 && chartContainer.clientWidth > 0) { if (apexChart) { apexChart.destroy(); } apexChart = new ApexCharts(chartContainer, chartOptions); apexChart.render(); console.log("Apex chart rendered."); if (chartStatusElement) chartStatusElement.textContent = "Loading initial chart data..."; fetchAndUpdateOHLC().then(() => { console.log("Initial data/indicators loaded."); if(chartStatusElement) setTimeout(() => { chartStatusElement.style.display = 'none'; }, 2000); }); if (tickerIntervalId) clearInterval(tickerIntervalId); if (chartIntervalId) clearInterval(chartIntervalId); tickerIntervalId = setInterval(fetchAndUpdatePrice, TICKER_UPDATE_INTERVAL); chartIntervalId = setInterval(fetchAndUpdateOHLC, CHART_UPDATE_INTERVAL); } else { setTimeout(attemptRender, 200); } } attemptRender(); } catch (e) { console.error("Error initializing Apex chart:", e); } }
        document.addEventListener('DOMContentLoaded', () => { console.log("DOM Loaded - SVG Logo + No Flash + Ticker Tape"); fetchAndUpdatePrice(); setTimeout(initChart, 150); });

    </script>
</body>
</html>